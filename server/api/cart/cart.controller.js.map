{"version":3,"sources":["api/cart/cart.controller.js"],"names":["_","require","Cart","Champion","exports","index","req","res","find","err","carts","handleError","status","json","Champindex","cartmy","user","_id","userChamp","champion","body","champ","cartItem","orderNo","user_id","show","findById","params","id","cart","send","Champshow","create","Champcreate","updatesingleCart","update","$set","company","multi","updated","merge","save","Champupdate","updateCart","destroy","remove","Champdestroy"],"mappings":"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","file":"cart.controller.js","sourcesContent":["'use strict';\n\nvar _ = require('lodash');\nvar Cart = require('./cart.model');\nvar Champion = require('./champion.model');\n// Get list of carts\nexports.index = function(req, res) {\n  Cart.find(function (err, carts) {\n    if(err) { return handleError(res, err); }\n    return res.status(200).json(carts);\n  });\n};\n// Get list of champion\nexports.Champindex = function(req, res) {\n  Champion.find(function (err, carts) {\n    if(err) { return handleError(res, err); }\n    return res.status(200).json(carts);\n  });\n};\n// Get list of carts\nexports.cartmy = function(req, res) {\n  \n  Cart.find({user:req.user._id,status:0},function (err, carts) {\n    if(err) { return handleError(res, err); }\n    return res.status(200).json(carts);\n  });\n};\n// Get list of carts\nexports.user = function(req, res) {\n  Champion.find({},function (err, carts) {\n    if(err) { return handleError(res, err); }\n    return res.status(200).json(carts);\n  });\n};\nexports.userChamp = function(req, res) {\n  Cart.find({champion:req.body.champ},function (err, carts) {\n    if(err) { return handleError(res, err); }\n    return res.status(200).json(carts);\n  });\n};\n// get cartItem\nexports.cartItem = function(req, res)\n{\n  if(req.body.orderNo)\n  {\n    \n    Cart.find(\n      {\"$and\":\n      [{\"company.company\":req.body.user_id},\n       {orderNo:req.body.orderNo}\n      ]\n      },function(err,carts){\n      if(err) { return handleError(res,err); }\n      return res.status(200).json(carts);\n    });\n  }\n  if(req.body.user)\n  {\n    Cart.find({user:req.body.user},function(err,carts){\n      if(err) { return handleError(res,err); }\n      return res.status(200).json(carts);\n    });\n  }\n};\n// Get a single cart\nexports.show = function(req, res) {\n  Cart.findById(req.params.id, function (err, cart) {\n    if(err) { return handleError(res, err); }\n    if(!cart) { return res.status(404).send('Not Found'); }\n    return res.json(cart);\n  });\n};\n// Get a single champion\nexports.Champshow = function(req, res) {\n  Champion.findById(req.params.id, function (err, cart) {\n    if(err) { return handleError(res, err); }\n    if(!cart) { return res.status(404).send('Not Found'); }\n    return res.json(cart);\n  });\n};\n// Creates a new cart in the DB.\nexports.create = function(req, res) {\n  Cart.create(req.body, function(err, cart) {\n    if(err) { return handleError(res, err); }\n    return res.status(201).json(cart);\n  });\n};\n// Creates a new champion in the DB.\nexports.Champcreate = function(req, res) {\n  Champion.create(req.body, function(err, cart) {\n    if(err) { return handleError(res, err); }\n    return res.status(201).json(cart);\n  });\n};\nexports.updatesingleCart=function(req, res) {\n   Cart.update(\n    {_id:req.body.id},\n    {$set:{company:req.body.company,cartItem:req.body.cartItem}},\n    {multi:true}\n    ,function (err, cart) {\n    if (err) { return handleError(res, err); }\n    else {\n      return res.status(200).json(cart);\n    }\n  });\n    \n  \n};\n// Updates an existing cart in the DB.\nexports.update = function(req, res) {\n  if(req.body._id) { delete req.body._id; }\n  Cart.findById(req.params.id, function (err, cart) {\n    if (err) { return handleError(res, err); }\n    if(!cart) { return res.status(404).send('Not Found'); }\n    var updated = _.merge(cart, req.body);\n    updated.save(function (err) {\n      if (err) { return handleError(res, err); }\n      return res.status(200).json(cart);\n    });\n  });\n};\n// Updates an existing champion in the DB.\nexports.Champupdate = function(req, res) {\n  if(req.body._id) { delete req.body._id; }\n  Champion.findById(req.params.id, function (err, cart) {\n    if (err) { return handleError(res, err); }\n    if(!cart) { return res.status(404).send('Not Found'); }\n    var updated = _.merge(cart, req.body);\n    updated.save(function (err) {\n      if (err) { return handleError(res, err); }\n      return res.status(200).json(cart);\n    });\n  });\n};\n// Updates an existing cart in the DB for remove user cart.\nexports.updateCart = function(req, res) {\n  Cart.update(\n    {user:req.body.user,status:0,_id:req.body.id},\n    {$set:{status:1,orderNo:req.body.orderNo}},\n    {multi:true}\n    ,function (err, cart) {\n    if (err) { return handleError(res, err); }\n    else {\n      return res.status(200).json(cart);\n    }\n  });\n};\n// Deletes a cart from the DB.\nexports.destroy = function(req, res) {\n  Cart.findById(req.params.id, function (err, cart) {\n    if(err) { return handleError(res, err); }\n    if(!cart) { return res.status(404).send('Not Found'); }\n    cart.remove(function(err) {\n      if(err) { return handleError(res, err); }\n      return res.status(204).send('No Content');\n    });\n  });\n};\n// Deletes a cart from the DB.\nexports.Champdestroy = function(req, res) {\n  Champion.findById(req.params.id, function (err, cart) {\n    if(err) { return handleError(res, err); }\n    if(!cart) { return res.status(404).send('Not Found'); }\n    cart.remove(function(err) {\n      if(err) { return handleError(res, err); }\n      return res.status(204).send('No Content');\n    });\n  });\n};\nfunction handleError(res, err) {\n  return res.status(500).send(err);\n}\n"]}